parsers: # array
  - reg: ^.*$
  # åˆ é™¤æœåŠ¡å•†æä¾›çš„ç­–ç•¥ç»„å’Œè§„åˆ™
    code: |
      module.exports.parse = (raw, { yaml }) => {
        const rawObj = yaml.parse(raw)
        const groups = []
        const rules = []
        return yaml.stringify({ ...rawObj, 'proxy-groups': groups, rules })
      } 

    yaml:
      prepend-proxy-groups:
        - name: PROXY
          type: select
          proxies:
#            - URL-TEST
#            - LOAD-BALANCE
            - SELECT
            - DIRECT

        - name: OTHER
          type: select
          proxies:
            - PROXY
            - DIRECT
            
        - name: AD
          type: select
          proxies:
            - REJECT
            - DIRECT
            - PROXY
               
        - name: URL-TEST
          type: url-test
          url: http://www.gstatic.com/generate_204
          interval: 600
          lazy: true
          tolerance: 100
                  
#        - name: LOAD-BALANCE
#          type: load-balance
#          url: http://www.gstatic.com/generate_204
#          interval: 600
         
        - name: Stable
          type: url-test
          url: http://www.google.com/generate_204
          interval: 300

        - name: æ—¥æœ¬
          type: url-test
          url: http://www.google.com/generate_204
          interval: 300
        
#        - name: æ–°åŠ å¡
#          type: url-test
#          url: http://www.google.com/generate_204
#          interval: 300

        - name: ç¾å›½
          type: select
          url: http://www.google.com/generate_204
          interval: 300

        - name: ğŸ¤–OpenAI
          type: select
          proxies:
          - æ—¥æœ¬
          - ç¾å›½

        - name: SELECT
          type: select
          url: http://www.google.com/generate_204
          interval: 300
          lazy: true
          tolerance: 1000
          
      commands:
        - proxy-groups.(URL-TEST).proxies=[]proxyNames|^(?!.*x12\.8)(?!.*x5\.88)(?!.*UID)(?!.*EMAIL).*$
#        - proxy-groups.(LOAD-BALANCE).proxies=[]proxyNames
        - proxy-groups.(SELECT).proxies=[]proxyNames|^(?!.*x12\.8)(?!.*UID)(?!.*EMAIL).*$
#        - proxy-groups.(No-HK).proxies=[]proxyNames|^(?!.*é¦™æ¸¯)(?!.*ğŸ‡­ğŸ‡°)(?!.*HK)(?!.*Hong Kong)(?!.*x12\.8)(?!.*x5\.88)(?!.*UID)(?!.*EMAIL).*$
        - proxy-groups.Stable.proxies=[]proxyNames|x12.8
        - proxy-groups.æ—¥æœ¬.proxies=[]proxyNames|æ—¥|æ—¥æœ¬|ğŸ‡¯ğŸ‡µ|å·æ—¥|ä¸œäº¬|å¤§é˜ª|æ³‰æ—¥|åŸ¼ç‰|æ²ªæ—¥|æ·±æ—¥|[^-]æ—¥|JP|Japan
#        - proxy-groups.æ–°åŠ å¡.proxies=[]proxyNames|æ–°åŠ å¡|ğŸ‡¸ğŸ‡¬|å¡|ç‹®åŸ|SG|Singapore
        - proxy-groups.ç¾å›½.proxies=[]proxyNames|ç¾|ç¾å›½|ğŸ‡ºğŸ‡¸|æ³¢ç‰¹å…°|è¾¾æ‹‰æ–¯|ä¿„å‹’å†ˆ|å‡¤å‡°åŸ|è´¹åˆ©è’™|ç¡…è°·|æ‹‰æ–¯ç»´åŠ æ–¯|æ´›æ‰çŸ¶|åœ£ä½•å¡|åœ£å…‹æ‹‰æ‹‰|è¥¿é›…å›¾|èŠåŠ å“¥|US|United States
        - mixed-port=7890
        # ä¸€äº›å¯èƒ½ç”¨åˆ°çš„æ­£åˆ™å¼
        # []proxyNames|a                         # åŒ…å«a
        # []proxyNames|^(.*)(a|b)+(.*)$          # åŒ…å«aæˆ–b
        # []proxyNames|^(?=.*a)(?=.*b).*$        # åŒ…å«aå’Œb
        # []proxyNames|^((?!b).)*a((?!b).)*$     # åŒ…å«aä¸”ä¸åŒ…å«b
        # []proxyNames|^((?!b|c).)*a((?!b|c).)*$ # åŒ…å«aä¸”ä¸åŒ…å«bæˆ–c

       # ä¸ºå„ä¸ªç­–ç•¥ç»„æ·»åŠ ä¸€ä¸ªDIRECTï¼Œé¿å…æœºåœºèŠ‚ç‚¹æ— æ³•åŒ¹é…ä¸Šé¢çš„æ­£åˆ™ç­›é€‰è€Œå¯¼è‡´é…ç½®å‡ºé”™ã€‚åº”è¯¥æœ‰å…¶ä»–åŠæ³•é¿å…ï¼Œä½†æ˜¯æˆ‘ä¸ä¼šã€‚
       # - proxy-groups.é¦™æ¸¯.proxies.0+REJECT


      prepend-rules:
   #     - RULE-SET,applications,DIRECT
   #     - DOMAIN-SUFFIX,gigabyte.com,PROXY
   #     - DOMAIN-SUFFIX,agoda.com,PROXY
   #     - DOMAIN-SUFFIX,klook.com,PROXY
   #     - DOMAIN-SUFFIX,gvt1-cn.com,PROXY
   #     - DOMAIN-SUFFIX,community.akamai.steamstatic.com,PROXY
   #     - DOMAIN-SUFFIX,open.spotify.com,PROXY
   #     - PROCESS-NAME,IDMan.exe,DIRECT
   #     - PROCESS-NAME,Diablo IV.exe,Stable
        - RULE-SET,my_proxy,PROXY
        - RULE-SET,my_cn,DIRECT
        - RULE-SET,my_ai,ğŸ¤–OpenAI
        - RULE-SET,us_only,ç¾å›½
        - RULE-SET,private,DIRECT
        - RULE-SET,reject,AD
#        - RULE-SET,icloud,DIRECT #
#        - RULE-SET,gfw,PROXY
#        - RULE-SET,telegramcidr,PROXY
#        - RULE-SET,lancidr,DIRECT
#        - RULE-SET,cncidr,DIRECT
        - GEOIP,CN,DIRECT
#        - RULE-SET,direct,DIRECT
#        - RULE-SET,proxy,OTHER
        - MATCH,OTHER # è§„åˆ™ä¹‹å¤–çš„

      mix-proxy-providers:
      mix-rule-providers: 
        my_ai:
          type: http
          behavior: classical
          url: "https://raw.githubusercontent.com/zidamn/MISC/master/my_ai.yaml"
          path: ./ruleset/my_ai.yaml
          interval: 86400

        my_proxy:
          type: http
          behavior: domain
          url: "https://raw.githubusercontent.com/zidamn/MISC/master/my_proxy.yaml"
          path: ./ruleset/my_proxy.yaml
          interval: 86400

        my_cn:
          type: http
          behavior: domain
          url: "https://raw.githubusercontent.com/zidamn/MISC/master/my_cn.yaml"
          path: ./ruleset/my_cn.yaml
          interval: 86400

        reject: # å¹¿å‘ŠåŸŸååˆ—è¡¨
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/reject.txt"
          path: ./ruleset/reject.yaml
          interval: 86400
          
#        icloud: # iCloud åŸŸååˆ—è¡¨
#          type: http
#          behavior: domain
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/icloud.txt"
#          path: ./ruleset/icloud.yaml
#          interval: 86400
          
#        proxy: # ä»£ç†åŸŸååˆ—è¡¨
#          type: http
#          behavior: domain
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
#          path: ./ruleset/proxy.yaml
#          interval: 86400
          
#        direct: # ç›´è¿åŸŸååˆ—è¡¨
#          type: http
#          behavior: domain
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/direct.txt"
#          path: ./ruleset/direct.yaml
#          interval: 86400
          
        private: # ç§æœ‰ç½‘ç»œä¸“ç”¨åŸŸååˆ—è¡¨
          type: http
          behavior: domain
          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/private.txt"
          path: ./ruleset/private.yaml
          interval: 86400
          
#        gfw: # GFWList åŸŸååˆ—è¡¨
#          type: http
#          behavior: domain
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/gfw.txt"
#          path: ./ruleset/gfw.yaml
#          interval: 86400
        
        us_only: # éä¸­å›½å¤§é™†ä½¿ç”¨çš„é¡¶çº§åŸŸååˆ—è¡¨
          type: http
          behavior: domain
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/tld-not-cn.txt"
          url: "https://raw.githubusercontent.com/zidamn/MISC/master/my_us.yaml"
          path: ./ruleset/my_us.yaml
          interval: 86400
          
#        telegramcidr: # Telegram ä½¿ç”¨çš„ IP åœ°å€åˆ—è¡¨
#          type: http
#          behavior: ipcidr
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/telegramcidr.txt"
#          path: ./ruleset/telegramcidr.yaml
#          interval: 86400
          
#        cncidr: # ä¸­å›½å¤§é™† IP åœ°å€åˆ—è¡¨
#          type: http
#          behavior: ipcidr
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/cncidr.txt"
#          path: ./ruleset/cncidr.yaml
#          interval: 86400
          
#        lancidr: # å±€åŸŸç½‘ IP åŠä¿ç•™ IP åœ°å€åˆ—è¡¨
#          type: http
#          behavior: ipcidr
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
#          path: ./ruleset/lancidr.yaml
#          interval: 86400
          
#        applications: # éœ€è¦ç›´è¿çš„å¸¸è§è½¯ä»¶åˆ—è¡¨
#          type: http
#          behavior: classical
#          url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt"
#          path: ./ruleset/applications.yaml
#          interval: 86400
